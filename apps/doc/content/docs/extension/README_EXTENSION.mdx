---
title: Prompt Enhancer Extension
description: A browser extension that adds AI-powered prompt enhancement to ChatGPT's interface.
---

## ğŸš€ Features

- **Smart Button Injection**: Seamlessly integrates with ChatGPT's UI
- **Two Implementation Approaches**: Class-based (vanilla) and React-based
- **tRPC Integration**: Ready for server-side AI enhancement
- **Configurable**: Easy to customize behavior and styling
- **State Management**: Proper loading states and error handling

## ğŸ“ Project Structure

```
src/
â”œâ”€â”€ entrypoints/
â”‚   â”œâ”€â”€ content.ts              # Main class-based content script
â”‚   â”œâ”€â”€ content-react.tsx       # React-based alternative
â”‚   â””â”€â”€ content/
â”‚       â””â”€â”€ EnhancerButton.tsx  # React component
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ trpc-chrome-client.ts   # tRPC client configuration
â”œâ”€â”€ config/
â”‚   â””â”€â”€ content-script.ts       # Configuration settings
â””â”€â”€ assets/
    â””â”€â”€ content-styles.css      # Button styling
```

## ğŸ› ï¸ Installation

### Chrome/Edge

```bash
bun run build
```

1. Open `chrome://extensions/`
2. Enable "Developer mode"
3. Click "Load unpacked"
4. Select `dist/chrome-mv3` folder

### Firefox

```bash
bun run build:firefox
```

1. Open `about:debugging`
2. Click "This Firefox"
3. Click "Load Temporary Add-on"
4. Select `manifest.json` from `dist/firefox-mv2`

## ğŸ¯ Usage

1. Go to [ChatGPT](https://chatgpt.com)
2. Type your prompt
3. Click the âš¡ enhancer button
4. Your prompt will be enhanced

## âš™ï¸ Configuration

Edit `src/config/content-script.ts` to customize:

```typescript
export const CONTENT_SCRIPT_CONFIG = {
  // Switch between React and vanilla implementations
  USE_REACT: false,

  ENHANCEMENT: {
    USE_TRPC: false, // Enable tRPC calls
    FALLBACK_METHOD: "double", // 'double' | 'prefix' | 'suffix'
    TIMEOUT: 5000,
    MAX_RETRIES: 2,
  },

  DEBUG: {
    ENABLED: true,
    LOG_ENHANCEMENTS: true,
  },
};
```

## ğŸ”§ Implementation Approaches

### 1. Class-Based (Current Default)

- **File**: `src/entrypoints/content.ts`
- **Pros**: Lightweight, fast, simple state management
- **Best for**: Simple enhancements, performance-critical scenarios

### 2. React-Based (Alternative)

- **File**: `src/entrypoints/content-react.tsx`
- **Pros**: Complex state management, component reusability, hooks
- **Best for**: Complex UI interactions, multiple enhancement options

To switch to React approach:

1. Set `USE_REACT: true` in config
2. Rename `content-react.tsx` to `content.tsx`
3. Rename current `content.ts` to `content-vanilla.ts`

## ğŸŒ tRPC Integration

### Current Setup

```typescript
// src/lib/trpc-chrome-client.ts
export const trpc = createTRPCProxyClient<trpcAppRouter>({
  links: [
    httpBatchLink({
      url: `${process.env.VITE_SERVER_URL}/trpc`,
      // CORS and error handling configured
    }),
  ],
});
```

### Server Requirements

Your tRPC server should have an `enhancePrompts` mutation:

```typescript
// Expected server endpoint
enhancePrompts: publicProcedure
  .input(
    z.object({
      prompt: z.string(),
      options: z
        .object({
          style: z.enum(["creative", "professional", "casual"]).optional(),
          length: z.enum(["short", "medium", "long"]).optional(),
        })
        .optional(),
    })
  )
  .mutation(async ({ input }) => {
    return {
      enhancedPrompt: "Your enhanced prompt here",
      confidence: 0.95,
      suggestions: ["suggestion1", "suggestion2"],
    };
  });
```

### Environment Setup

```bash
# .env
VITE_SERVER_URL=http://localhost:3000
```

## ğŸ¨ Customization

### Enhancement Logic

```typescript
// In PromptEnhancer class or React component
private async getEnhancedText(currentText: string): Promise<string> {
  if (CONTENT_SCRIPT_CONFIG.ENHANCEMENT.USE_TRPC) {
    try {
      const result = await trpc.enhancePrompts.mutate({
        prompt: currentText,
        options: { style: 'creative' }
      });
      return result.enhancedPrompt;
    } catch (error) {
      // Fallback to local enhancement
    }
  }

  // Local enhancement methods
  return enhancementMethods[CONTENT_SCRIPT_CONFIG.ENHANCEMENT.FALLBACK_METHOD](currentText);
}
```

### Button Styling

Update the Tailwind classes in the config:

```typescript
BUTTON_CLASSES: [
  "flex",
  "items-center",
  "justify-center",
  "w-9",
  "h-9",
  "ml-1",
  "rounded-full",
  "border",
  "border-white/10",
  "bg-transparent",
  "text-current",
  "transition-all",
  "duration-200",
  "hover:bg-white/10",
  "hover:opacity-80",
  "active:scale-95",
  "disabled:opacity-50",
  "disabled:cursor-not-allowed",
];
```

## ğŸ› Debugging

Enable debug mode in config:

```typescript
DEBUG: {
  ENABLED: true,
  LOG_ENHANCEMENTS: true,
  LOG_DOM_CHANGES: true, // Verbose DOM logging
}
```

Check browser console for:

- Button injection status
- Enhancement requests/responses
- tRPC connection health
- DOM change events

## ğŸ”„ Development Workflow

```bash
# Development with hot reload
bun run dev

# Build for production
bun run build

# Type checking
bun run compile
```

## ğŸ“ Next Steps

1. **Implement tRPC Server**: Create the `enhancePrompts` endpoint
2. **Add Enhancement Options**: Style, length, focus areas
3. **UI Improvements**: Loading animations, error states
4. **Advanced Features**: Prompt history, favorites, templates

## ğŸ¤ Contributing

1. Choose your implementation approach (class-based or React)
2. Update the enhancement logic in `getEnhancedText()`
3. Test with both tRPC and fallback methods
4. Update configuration as needed
